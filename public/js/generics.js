function MenuDirectiveCtrl(e){function t(){this.sideBar&&e("menu").toggle()}var o=this;o.toogle=t}function MenuDir(){var e={templateUrl:"/components/directive.menu.html",restrict:"EA",scope:{sideBar:"=sideBar"},controller:["$mdSidenav",MenuDirectiveCtrl],replace:"true",controllerAs:"vm",bindToController:!0};return e}function HotelesFactory(e,t){var o={getHoteles:function(){return e({cache:!1,responseType:"json",headers:{"Content-Type":"application/json"},method:"GET",url:t.apiHost+"/api/hotel"})},delete:function(o){return console.log(o._id),e({cache:!1,responseType:"json",headers:{"Content-Type":"application/json"},method:"DELETE",url:t.apiHost+"/api/hotel/"+o._id})},save:function(o){return console.log(o),e({cache:!1,responseType:"json",data:o,headers:{"Content-Type":"application/json"},method:"POST",url:t.apiHost+"/api/hotel"})}};return o}function filter(e,t,o){for(var n=[],l=e.length-1;l>=0;l--)e[l].price<=t&&e[l].stars<=o&&n.push(e[l]);return n}function HotelesMainCtrl(e,t){function o(){t.go("newHotel")}function n(t){e.delete(t).then(function(){console.log("Borro"),hotels.indexOf(t)!==-1&&hotels.splice(hotels.indexOf(t),1),i.hotels.indexOf(t)!==-1&&i.hotels.splice(i.hotels.indexOf(t),1)},function(e){console.log(e)})}function l(){i.hotels=filter(hotels,i.filters.price,i.filters.stars),a()}function r(){i.hotels=filter(hotels,i.filters.price,i.filters.stars),a()}function a(){i.isNevahToShow=!(i.hotels.length||i.hotels.length<0)}var i=this;i.hotels=[],hotels=[],i.isNevahToShow=!1,i.onPriceFilterChange=l,i.onStarsFilterChange=r,i.goToAddHotel=o,i.deleteHotel=n,i.filters={price:1e4,stars:5},e.getHoteles().then(function(e){i.hotels=e.data,hotels=e.data,a()},function(e){console.log(e)})}function NewHotelCtrl(e,t){function o(){t.go("hoteles")}function n(){console.log(l.hotel),e.save(l.hotel).then(function(){t.go("hoteles")},function(e){console.log(e)})}var l=this;l.hotel={stars:3,price:5e3},l.goToHotelList=o,l.onSubmit=n}angular.module("almundo",["ngMaterial","ngRoute","ui.router"]),angular.element(document).ready(function(){angular.bootstrap(document,["almundo"])}),angular.module("almundo").run(["$rootScope",function(e){location.host.indexOf("jabamastudio.com")!=-1?e.apiHost="//api-resto.jabamastudio.com":e.apiHost="//localhost:3000"}]),angular.module("almundo").config(["$httpProvider","$stateProvider","$urlRouterProvider","$mdThemingProvider",function(e,t,o,n){o.otherwise("/"),n.theme("default").primaryPalette("orange").accentPalette("blue")}]),angular.module("almundo").config(["$stateProvider",function(e){e.state("hoteles",{url:"/",controller:"HotelesMainCtrl as vm",templateUrl:"/components/view.main-hoteles.html"}).state("newHotel",{url:"/add",controller:"NewHotelCtrl as vm",templateUrl:"/components/view.new-hotel.html"})}]),angular.module("almundo").directive("menu",[MenuDir]),angular.module("almundo").factory("HotelesFactory",["$http","$rootScope",HotelesFactory]),angular.module("almundo").controller("HotelesMainCtrl",["HotelesFactory","$state",HotelesMainCtrl]),angular.module("almundo").controller("NewHotelCtrl",["HotelesFactory","$state",NewHotelCtrl]);