function MenuDirectiveCtrl(e){function t(){this.sideBar&&e("menu").toggle()}var o=this;o.toogle=t}function MenuDir(){var e={templateUrl:"/components/directive.menu.html",restrict:"EA",scope:{sideBar:"=sideBar"},controller:["$mdSidenav",MenuDirectiveCtrl],replace:"true",controllerAs:"vm",bindToController:!0};return e}function HotelesFactory(e,t){var o={getHoteles:function(){return e({cache:!1,responseType:"json",headers:{"Content-Type":"application/json"},method:"GET",url:t.apiHost+"/api/hotel"})},getHotel:function(o){return e({cache:!1,responseType:"json",headers:{"Content-Type":"application/json"},method:"GET",url:t.apiHost+"/api/hotel/"+o})},delete:function(o){return console.log(o._id),e({cache:!1,responseType:"json",headers:{"Content-Type":"application/json"},method:"DELETE",url:t.apiHost+"/api/hotel/"+o._id})},update:function(o){return console.log(o),e({cache:!1,responseType:"json",data:o,headers:{"Content-Type":"application/json"},method:"PUT",url:t.apiHost+"/api/hotel/"+o._id})},save:function(o){return console.log(o),e({cache:!1,responseType:"json",data:o,headers:{"Content-Type":"application/json"},method:"POST",url:t.apiHost+"/api/hotel"})}};return o}function EditHotelCtrl(e,t,o){function l(){t.go("hoteles")}function n(){console.log(r.hotel),e.update(r.hotel).then(function(){t.go("hoteles")},function(e){console.log(e)})}var r=this;r.hotel={},e.getHotel(o.hotelId).then(function(e){r.hotel._id=e.data._id,r.hotel.name=e.data.name,r.hotel.description=e.data.description,r.hotel.price=e.data.price,r.hotel.stars=e.data.stars,console.log(e)},function(e){console.log(e)}),r.goToHotelList=l,r.onSubmit=n}function filter(e,t,o){for(var l=[],n=e.length-1;n>=0;n--)e[n].price<=t&&e[n].stars<=o&&l.push(e[n]);return l}function HotelesMainCtrl(e,t){function o(){t.go("newHotel")}function l(e){console.log(e._id),t.go("editHotel",{hotelId:e._id})}function n(t){e.delete(t).then(function(){hotels.indexOf(t)!==-1&&hotels.splice(hotels.indexOf(t),1),s.hotels.indexOf(t)!==-1&&s.hotels.splice(s.hotels.indexOf(t),1),i()},function(e){console.log(e)})}function r(){s.hotels=filter(hotels,s.filters.price,s.filters.stars),i()}function a(){s.hotels=filter(hotels,s.filters.price,s.filters.stars),i()}function i(){s.isNevahToShow=!(s.hotels.length||s.hotels.length<0)}var s=this;s.hotels=[],hotels=[],s.isNevahToShow=!1,s.onPriceFilterChange=r,s.onStarsFilterChange=a,s.goToAddHotel=o,s.deleteHotel=n,s.goToEditHotel=l,s.filters={price:1e4,stars:5},e.getHoteles().then(function(e){s.hotels=e.data,hotels=e.data,i()},function(e){console.log(e)})}function NewHotelCtrl(e,t){function o(){t.go("hoteles")}function l(){console.log(n.hotel),e.save(n.hotel).then(function(){t.go("hoteles")},function(e){console.log(e)})}var n=this;n.hotel={stars:3,price:5e3},n.goToHotelList=o,n.onSubmit=l}angular.module("almundo",["ngMaterial","ngRoute","ui.router"]),angular.element(document).ready(function(){angular.bootstrap(document,["almundo"])}),angular.module("almundo").run(["$rootScope",function(e){location.host.indexOf("jabamastudio.com")!=-1?e.apiHost="//api-resto.jabamastudio.com":e.apiHost="//localhost:3000"}]),angular.module("almundo").config(["$httpProvider","$stateProvider","$urlRouterProvider","$mdThemingProvider",function(e,t,o,l){o.otherwise("/"),l.theme("default").primaryPalette("orange").accentPalette("blue")}]),angular.module("almundo").config(["$stateProvider",function(e){e.state("hoteles",{url:"/",controller:"HotelesMainCtrl as vm",templateUrl:"/components/view.main-hoteles.html"}).state("editHotel",{url:"/edit/:hotelId",controller:"EditHotelCtrl as vm",templateUrl:"/components/view.hotel.html"}).state("newHotel",{url:"/add",controller:"NewHotelCtrl as vm",templateUrl:"/components/view.hotel.html"})}]),angular.module("almundo").directive("menu",[MenuDir]),angular.module("almundo").factory("HotelesFactory",["$http","$rootScope",HotelesFactory]),angular.module("almundo").controller("EditHotelCtrl",["HotelesFactory","$state","$stateParams",EditHotelCtrl]),angular.module("almundo").controller("HotelesMainCtrl",["HotelesFactory","$state",HotelesMainCtrl]),angular.module("almundo").controller("NewHotelCtrl",["HotelesFactory","$state",NewHotelCtrl]);